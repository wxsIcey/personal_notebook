# PD分离的概念
PD分离出现原因：一个推理服务实例里面起一个模型，适合数据长度固定的场景，推理服务可以通过增加batch size提升吞吐/性能。但是对于包含自回归计算的Transformer架构效率并不高。  

prefile: 预填充阶段，在vllm中，假设prompt中含有3个token，prefill阶段结束后，这三个token相关的KV值都被装进了cache;
decode: 生成response的阶段，在这个阶段会根据prompt的prefill结果，一个token一个token的生成response；

显存利用率影响因素：
- 模型大小：更大更复杂的模型需要更多显存来存储参数和中间结果；
- batch size：较大的批量大小会增加同时处理的数据量，占用更多显存；
- 数据类型：使用较低精度的数据类型（如FP6代替FP32）可以减少显存需求；

算力利用率影响因素：
- 并行度：任务能否有效利用硬件提供的并行处理能力；
- 内存带宽： 足够的内存带宽保证了数据能够快速地进出计算单元；
- 计算密度：任务是否包含大量密集的数学运算（比如矩阵乘法）；
